<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="edu.northwestern.bioinformatics.studycalendar.domain.reporting.ScheduledActivitiesReportRow" mutable="false">
        <subselect>
            SELECT
                sa.id,
                sa.current_state_date,
                sa.current_state_reason,
                sa.current_state_mode_id,
                sa.ideal_date,
                sa.details
            FROM
                scheduled_activities sa
        </subselect>
        
        <synchronize table="scheduled_activities"/>

        <id name="id" />

        <component name="scheduledActivity">
            <property name="id" column="id" insert="false" update="false"/>
            <property name="currentState" type="edu.northwestern.bioinformatics.studycalendar.utils.hibernate.ScheduledActivityStateType">
                <column name="current_state_mode_id"/>
                <column name="current_state_reason"/>
                <column name="current_state_date"/>
            </property>
            <property name="idealDate" column="ideal_date"/>
            <property name="details" column="details"/>
        </component>

    </class>
</hibernate-mapping>